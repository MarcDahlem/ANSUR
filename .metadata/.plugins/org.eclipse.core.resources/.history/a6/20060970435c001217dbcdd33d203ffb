package classes;

import java.util.ArrayList;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.TextView;
import android.widget.Toast;

import com.example.streamwithvlc.R;

public class MyCustomAdapter extends ArrayAdapter<Camera> {
	private ArrayList<Camera> countryList;
	 
	  public MyCustomAdapter(Context context, int textViewResourceId, 
	    ArrayList<Camera> countryList) {
	   super(context, textViewResourceId, countryList);
	   this.countryList = new ArrayList<Camera>();
	   this.countryList.addAll(countryList);
	  }
	 
	  private class ViewHolder {
	   TextView code;
	   CheckBox name;
	  }
	 
	  @Override
	  public View getView(int position, View convertView, ViewGroup parent) {
	 
	   ViewHolder holder = null;
	   Log.v("ConvertView", String.valueOf(position));
	 
	   if (convertView == null) {
	   LayoutInflater vi = (LayoutInflater)getSystemService(
	     Context.LAYOUT_INFLATER_SERVICE);
	   convertView = vi.inflate(R.layout.camera_info, null);
	 
	   holder = new ViewHolder();
	   holder.code = (TextView) convertView.findViewById(R.id.port);
	   holder.name = (CheckBox) convertView.findViewById(R.id.checkBox1);
	   convertView.setTag(holder);
	 
	    holder.name.setOnClickListener( new View.OnClickListener() {  
	     public void onClick(View v) {  
	      CheckBox cb = (CheckBox) v ;  
	      Camera camera = (Camera) cb.getTag();  
	 
	      camera.setSelected(cb.isChecked());
	     }  
	    });  
	   } 
	   else {
	    holder = (ViewHolder) convertView.getTag();
	   }
	 
	   Camera country = countryList.get(position);
	   holder.code.setText(" (" +  country.getPort() + ")");
	   holder.name.setText(country.getName());
	   holder.name.setChecked(country.isSelected());
	   holder.name.setTag(country);
	 
	   return convertView;
	 
	  }
	 
	 }
